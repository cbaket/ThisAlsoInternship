<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>SALSA</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
  </head>
  <body>
    <h1>Hey This Also Crew!</h1>


<div id="drag">
  Drag your file here
</div>

<p id="display"></p>
<p></p>

<script>

function getFiletype(array){
        <!-- Takes an array of files and returns an array of file extensions -->

        var fileTypes = [];
	var foundOrNah = false;

        if (array == []){
		return fileTypes;
	}
        for ( i = 0; i < array.length; i++){
           var fileT = array[i].split('.').pop();
		for (i = 0; i < fileTypes.length; i++){
                	if (fileTypes[i] == fileT){
                		foundOrNah = true; 
			}
		}

	if (foundOrNah){
		fileTypes.push(fileT);
	}

        }
        return fileTypes;
}

function createFiletypeElement(array){
	for (i = 0; i < array.length; i++){
		( function(i) {
		console.log(i);
		var rando = $("<p></p>").attr('id',array[i]);

		console.log(rando);
		rando.appendTo('body');
		console.log(array[i]);                   var fileT = fs[i].split('.').pop();

	
		document.getElementById(array[i]).innerHTML = "New " + array[i] + " element, is working";
	    })(i);

	}
}


function displayFiles(dir){
	var displayStr = "";
        var fs = require("fs");

	 fs = fs.readdirSync(dir);
	
        for ( i = 0; i < fs.length; i++){

         displayStr += fs[i] + "<br>";
         var str = fs[i];
        }

	return displayStr;
}




$(document).ready(function(){
	var dir = "testFolder";
        var fs = require("fs");
         fs = fs.readdirSync(dir);
	
	var fileTypes = [];

        for ( i = 0; i < fs.length; i++){
	        var newOrNah = true;
        	   var fileT = fs[i].split('.').pop();

		console.log(fileT)
                for (j = 0; j < fileTypes.length; j++){
                        if (fileTypes[j] == fileT){
                                newOrNah = false;
                        }
                }

	        if (newOrNah){
        	        fileTypes.push(fileT);
			console.log(fileT + " has been added to the fileTypes list")
	        } else {
                        console.log(fileT + " was not added to the fileTypes list")

		}


        }



	for (i = 0; i < fileTypes.length; i++){
		console.log(fileTypes[i]);
                $("<p></p>").attr('id', 'space').appendTo('body');

                $("<div></div>").attr('id', fileTypes[i]).appendTo('body');
		var fileTDiv = document.getElementById(fileTypes[i]);

		for (j = 0; j < fs.length; j++){		                   

			var fileT = fs[j].split('.').pop();
			if (fileT == fileTypes[i]){
	               		$("<button></button>" ).attr('id', fs[j]).appendTo(fileTDiv);		
		                document.getElementById(fs[j]).innerHTML = fs[j];
			}

		}


        }


		document.getElementById("display").innerHTML = displayFiles(dir);




});


function myFunction(dir, filename){
	    document.open( dir + "/"+ filename, "replace");

}


</script> 


</body>
</html>
